<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ATEM Musikmarketing</title>
    <!-- Include Pico.css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2.0.6/css/pico.min.css" />
    <!-- Custom Styles -->
    <link rel="stylesheet" href="/static/style.css" />
    <!-- Import Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- Use a modern sans-serif font -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet" />
  </head>

  <body>
    <button id="configButton">Choose Voice</button>
    
    <div class="page-container">
      <img src="https://rttyvrobxjbijgppmkby.supabase.co/storage/v1/object/public/logos/ATEM%20Logo.webp" 
           alt="ATEM Logo" 
           class="logo">
      
      <h1>ATEM Musikmarketing</h1>
      <h2>Talk to your agent</h2>

      <div class="content-container">
        <h3>In your browser</h3>
        <button id="toggleButton" class="black-button">Start Conversation</button>
        <div id="statusMessage"></div>
        <pre id="report"></pre>
      </div>
    </div>

    <div class="sidebar" id="sidebar">
      <h2>Voice Selection</h2>
      <div class="dropdown-container">
        <label for="themeSelect">Choose a voice before launching the conversation:</label>
        <select id="themeSelect" name="themeSelect">
          <option value="alloy">Alloy</option>
          <option value="ash">Ash</option>
          <option value="ballad">Ballad</option>
          <option value="coral">Coral</option>
          <option value="echo">Echo</option>
          <option value="sage">Sage</option>
        </select>
      </div>
    </div>

    <script src="/static/app.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const themeSelect = document.getElementById('themeSelect');

        themeSelect.addEventListener('change', function () {
          const selectedVoice = themeSelect.value;
          updateVoiceOnServer(selectedVoice);
        });

        const configButton = document.getElementById('configButton');
        const sidebar = document.getElementById('sidebar');

        configButton.addEventListener('click', () => {
          const isVisible = sidebar.style.display === 'none' || sidebar.style.display === '';
          sidebar.style.display = isVisible ? 'block' : 'none';
          document.body.classList.toggle('sidebar-visible', isVisible);
        });
      });
    </script>
  </body>
</html>
